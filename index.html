<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Meet Your Stylist - Luxury Personal Styling</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&family=Inter:wght@400;500;600&display=swap');

      :root {
        --burgundy: #8B1538;
        --deep-oxblood: #6B0F1A;
        --soft-burgundy: #A0242B;
        --pure-white: #FFFFFF;
        --warm-off-white: #FAFAF9;
        --light-gray: #F5F5F5;
        --soft-gray: #E8E8E8;
        --primary-text: #1A1A1A;
        --secondary-text: #4A4A4A;
        --tertiary-text: #737373;
        --charcoal: #2B2B2B;
        --slate-blue-gray: #4A5A6A;
        --warm-taupe: #A89B8F;
        --shadow-light: 0 1px 3px rgba(0,0,0,0.08);
        --shadow-medium: 0 4px 24px rgba(0,0,0,0.08);
        --shadow-heavy: 0 12px 24px rgba(0,0,0,0.12);
        --radius: 16px;
        --radius-large: 20px;
        --radius-pill: 999px;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: var(--pure-white);
        color: var(--primary-text);
        line-height: 1.6;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      h1, h2, h3, h4, h5, h6 {
        font-family: 'Cormorant Garamond', serif;
        font-weight: 600;
        line-height: 1.2;
        margin-bottom: 0.5em;
      }

      h1 { font-size: 56px; font-weight: 700; letter-spacing: -0.02em; }
      h2 { font-size: 40px; font-weight: 600; letter-spacing: -0.01em; }
      h3 { font-size: 28px; font-weight: 600; }
      h4 { font-size: 22px; font-weight: 600; }

      p { margin-bottom: 1em; }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 24px;
      }

      @media (min-width: 1024px) {
        .container { padding: 0 48px; }
      }

      .section {
        padding: 48px 0;
      }

      @media (min-width: 1024px) {
        .section { padding: 56px 0; }
      }

      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 16px 40px;
        border-radius: var(--radius-pill);
        font-family: 'Inter', sans-serif;
        font-weight: 600;
        font-size: 16px;
        letter-spacing: 0.01em;
        text-decoration: none;
        border: none;
        cursor: pointer;
        transition: all 0.3s ease;
        min-height: 48px;
      }

      .btn-primary {
        background: var(--burgundy);
        color: var(--pure-white);
        box-shadow: 0 4px 16px rgba(139, 21, 56, 0.2);
      }

      .btn-primary:hover {
        background: var(--deep-oxblood);
        transform: translateY(-2px);
        box-shadow: 0 8px 24px rgba(139, 21, 56, 0.3);
      }

      .btn-primary:active {
        transform: translateY(0) scale(0.98);
      }

      .btn-secondary {
        background: var(--charcoal);
        color: var(--pure-white);
        box-shadow: 0 4px 16px rgba(43, 43, 43, 0.2);
      }

      .btn-secondary:hover {
        background: var(--primary-text);
        transform: translateY(-2px);
        box-shadow: 0 8px 24px rgba(43, 43, 43, 0.3);
      }

      .btn-secondary:active {
        transform: translateY(0) scale(0.98);
      }

      .card {
        background: var(--pure-white);
        border: 1px solid var(--soft-gray);
        border-radius: var(--radius);
        padding: 32px;
        box-shadow: var(--shadow-light);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .card:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-heavy);
      }

      .feature-tag {
        display: inline-flex;
        align-items: center;
        background: var(--light-gray);
        padding: 8px 16px;
        border-radius: var(--radius-pill);
        font-family: 'Inter', sans-serif;
        font-weight: 500;
        font-size: 14px;
        color: var(--secondary-text);
        margin-right: 12px;
        margin-bottom: 8px;
      }

      .feature-tag svg {
        width: 16px;
        height: 16px;
        margin-right: 8px;
        fill: var(--burgundy);
      }

      .grid {
        display: grid;
        gap: 24px;
      }

      @media (min-width: 768px) {
        .grid-2 { grid-template-columns: repeat(2, 1fr); }
        .grid-3 { grid-template-columns: repeat(3, 1fr); }
      }

      .hero {
        background: var(--pure-white);
        min-height: 0;
        display: flex;
        align-items: center;
        padding: 32px 0;
        margin-bottom: 24px;
      }

      .hero-content {
        display: grid;
        gap: 20px;
      }

      @media (min-width: 1024px) {
        .hero-content { grid-template-columns: 1fr 1fr; align-items: center; gap: 24px; }
      }

      .hero-text h1 {
        color: var(--burgundy);
        margin-bottom: 16px;
      }

      .hero-text p {
        font-size: 18px;
        color: var(--secondary-text);
        max-width: 520px;
        margin-bottom: 24px;
      }

      .hero-visual {
        position: relative;
        border-radius: var(--radius);
        overflow: hidden;
        box-shadow: var(--shadow-medium);
        background: var(--warm-off-white);
        min-height: 400px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .hero-visual img {
        width: 100%;
        height: auto;
        object-fit: cover;
      }

      .hero-caption {
        text-align: center;
        font-size: 14px;
        color: var(--tertiary-text);
        margin-top: 16px;
      }

      .service-cards .card {
        text-align: center;
      }

      .service-cards .card svg {
        width: 40px;
        height: 40px;
        fill: var(--burgundy);
        margin-bottom: 16px;
      }

      .service-cards .card h4 {
        margin-bottom: 12px;
      }

      .service-cards .card p {
        color: var(--secondary-text);
      }

      .stylist-section h2 {
        text-align: center;
        margin-bottom: 48px;
      }

      .stylist-cards .card {
        border-width: 2px;
        padding: 40px;
        border-radius: var(--radius-large);
      }

      .stylist-cards .card.concierge {
        border-color: var(--burgundy);
      }

      .stylist-cards .card.closet {
        border-color: var(--charcoal);
      }

      .stylist-cards .card ul {
        list-style: none;
        padding: 0;
        margin: 16px 0;
      }

      .stylist-cards .card li {
        padding-left: 24px;
        position: relative;
        margin-bottom: 8px;
        color: var(--secondary-text);
      }

      .stylist-cards .card li::before {
        content: '✓';
        position: absolute;
        left: 0;
        color: var(--burgundy);
        font-weight: bold;
      }

      .session-preview {
        background: var(--warm-off-white);
        padding: 80px 0;
      }

      .session-preview .container {
        max-width: 800px;
      }

      .session-preview h2 {
        text-align: center;
        margin-bottom: 48px;
      }

      .session-mockup {
        background: var(--pure-white);
        border: 1px solid var(--soft-gray);
        border-radius: var(--radius);
        padding: 32px;
        box-shadow: var(--shadow-light);
        margin-bottom: 24px;
      }

      .session-mockup .status {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 16px;
      }

      .session-mockup .status-pill {
        background: var(--light-gray);
        padding: 4px 12px;
        border-radius: var(--radius-pill);
        font-size: 12px;
        color: var(--secondary-text);
      }

      .session-mockup .conversation-link {
        color: var(--burgundy);
        text-decoration: none;
        font-weight: 500;
      }

      .session-mockup .conversation-link:hover {
        text-decoration: underline;
      }

      .session-notes {
        margin-top: 24px;
      }

      .session-notes summary {
        cursor: pointer;
        font-weight: 600;
        margin-bottom: 8px;
      }

      .testimonial {
        background: var(--warm-off-white);
        padding: 80px 0;
        text-align: center;
      }

      .testimonial .container {
        max-width: 800px;
      }

      .testimonial h2 {
        margin-bottom: 48px;
      }

      .testimonial blockquote {
        font-size: 22px;
        font-style: italic;
        line-height: 1.6;
        color: var(--primary-text);
        position: relative;
        margin-bottom: 24px;
      }

      .testimonial blockquote::before {
        content: '"';
        font-size: 60px;
        color: var(--burgundy);
        opacity: 0.2;
        position: absolute;
        top: -20px;
        left: -20px;
      }

      .testimonial cite {
        font-size: 14px;
        color: var(--tertiary-text);
      }

      .final-cta {
        background: var(--pure-white);
        padding: 100px 0;
        text-align: center;
      }

      .mini-steps {
        display: grid;
        gap: 12px;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      }

      .step-card {
        background: var(--pure-white);
        border: 1px solid var(--soft-gray);
        border-radius: var(--radius);
        padding: 16px;
        box-shadow: var(--shadow-light);
        font-weight: 600;
        color: var(--primary-text);
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .step-badge {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: var(--burgundy);
        color: var(--pure-white);
        display: grid;
        place-items: center;
        font-weight: 700;
        font-size: 14px;
        box-shadow: var(--shadow-medium);
      }

      .final-cta .container {
        max-width: 600px;
      }

      .final-cta h2 {
        margin-bottom: 16px;
      }

      .final-cta p {
        font-size: 18px;
        color: var(--secondary-text);
        margin-bottom: 32px;
      }

      .final-cta .btn {
        font-size: 18px;
        padding: 20px 48px;
      }

      @media (max-width: 767px) {
        h1 { font-size: 38px; }
        h2 { font-size: 28px; }
        h3 { font-size: 22px; }
        h4 { font-size: 18px; }
        .section { padding: 48px 0; }
        .container { padding: 0 24px; }
        .hero { min-height: auto; padding: 48px 0; }
        .hero-content { gap: 48px; }
        .btn { width: 100%; justify-content: center; }
        .grid-3 { grid-template-columns: 1fr; }
        .stylist-cards .grid-2 { grid-template-columns: 1fr; }
      }

      @media (prefers-reduced-motion: reduce) {
        * {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }

      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }

      .focus-visible:focus {
        outline: 2px solid var(--burgundy);
        outline-offset: 2px;
      }
    </style>
  </head>
    </style>
  </head>
  <body>
    <!-- Hero Section -->
    <section class="hero section">
      <div class="container">
        <div class="hero-content">
          <div class="hero-text">
            <h1>Meet your Stylist</h1>
            <p>Elevated looks with zero effort - speak to a live stylist who curates makeup, outfits, and reuses your closet staples in minutes.</p>
            <div class="feature-tags">
              <span class="feature-tag">
                <svg viewBox="0 0 24 24"><path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"/></svg>
                Live video + voice
              </span>
              <span class="feature-tag">
                <svg viewBox="0 0 24 24"><path d="M10.5 8.5c.28 0 .5.22.5.5v1.5H14c.55 0 1 .45 1 1s-.45 1-1 1h-3v1.5c0 .28-.22.5-.5.5s-.5-.22-.5-.5v-1.5H7c-.55 0-1-.45-1-1s.45-1 1-1h3V9c0-.28.22-.5.5-.5z"/></svg>
                Human handoff anytime
              </span>
              <span class="feature-tag">
                <svg viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
                Recap after each session
              </span>
            </div>
          </div>
        </div>
      </div>
    </section>

    </section>

    <!-- How it works (compact) -->
    <section class="section" style="padding-top: 32px; padding-bottom: 32px;">
      <div class="container mini-steps">
        <div class="step-card">
          <div class="step-badge">1</div>
          Choose your stylist
        </div>
        <div class="step-card">
          <div class="step-badge">2</div>
          Start a live session in one click
        </div>
        <div class="step-card">
          <div class="step-badge">3</div>
          Get a recap + next steps
        </div>
      </div>
    </section>

    <!-- Service Cards Section -->
    <section class="service-cards section">
      <div class="container">
        <div class="grid grid-3">
          <div class="card" style="min-height: 220px;">
            <svg viewBox="0 0 24 24">
              <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
            </svg>
            <h4>Tailored looks</h4>
            <p>Makeup + outfits matched to your undertone and vibe.</p>
          </div>
          <div class="card" style="min-height: 220px;">
            <svg viewBox="0 0 24 24">
              <path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9H9V9h10v2zm-4 4H9v-2h6v2zm4-8H9V5h10v2z"/>
            </svg>
            <h4>Closet reuse</h4>
            <p>5 outfits from what you own; add only what matters.</p>
          </div>
          <div class="card" style="min-height: 220px;">
            <svg viewBox="0 0 24 24">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </svg>
            <h4>On-demand tweaks</h4>
            <p>Dial subtle ↔ bold in real time; get a session recap.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Choose Your Stylist Section -->
    <section class="stylist-section section">
      <div class="container">
        <h2>Choose your stylist</h2>
        <div class="stylist-cards grid grid-2">
          <div class="card concierge">
            <h3>Style Concierge</h3>
            <p>Makeup + look pairing; adjusts in real time.</p>
            <ul>
              <li>Undertone-aware base + shade picks</li>
              <li>Color story for eyes/lips + accessory tip</li>
              <li>Boldness dial on request</li>
            </ul>
            <button class="btn btn-primary" id="start-default-card">Start with Style Concierge</button>
          </div>
          <div class="card closet">
            <h3>Closet Refresh Curator</h3>
            <p>Reuses your staples; 5 outfits + smart add-on list.</p>
            <ul>
              <li>3 reuse-first outfits, 2 light add-ons</li>
              <li>Max 3 buy recs, each unlocks ≥2 looks</li>
              <li>Recap + care/fabric tips</li>
            </ul>
            <button class="btn btn-secondary" id="start-closet-card">Start with Closet Refresh</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Session Interface Preview -->
    <section class="session-preview">
      <div class="container">
        <h2>Live session experience</h2>
        <div class="session-mockup" style="min-height: 320px;">
          <div class="status">
            <span class="status-pill">No session</span>
            <span>Demo conversation</span>
          </div>
          <div style="margin-bottom: 16px;">
            <span style="color: var(--tertiary-text); font-size: 14px;">ID: <span id="conversation-id">—</span></span>
          </div>
          <div>
            <a href="#" class="conversation-link" style="display: none;">Open conversation</a>
          </div>
          <div class="session-notes">
            <details>
              <summary>Session notes</summary>
              <div id="session-logs" style="margin-top: 8px; color: var(--secondary-text); font-family: 'Courier New', monospace; font-size: 14px; line-height: 1.5;">
                Ready.
              </div>
            </details>
          </div>
        </div>
      </div>
    </section>

    <!-- Testimonial Section -->
    <section class="testimonial">
      <div class="container">
        <h2>Client love</h2>
        <blockquote>
          "The stylist instantly understood my vibe and reused my closet in ways I never imagined. The recap was gold."
        </blockquote>
        <cite>—Anika R., Founder, New York</cite>
      </div>
    </section>

    <!-- Final CTA Section -->
    <section class="final-cta">
      <div class="container">
        <h2>Ready to elevate your style?</h2>
        <p>Connect with an expert stylist today.</p>
      </div>
    </section>

    <!-- Hidden fields for configuration -->
    <div style="display: none;">
      <input id="replica" name="replica" />
      <input id="persona" name="persona" />
      <input id="name" name="name" />
      <input id="callback" name="callback" />
    </div>

    <script>
      // JavaScript for Tavus CVI interactions
      const logEl = document.getElementById('session-logs');
      const cidEl = document.getElementById('conversation-id');
      const curlEl = document.querySelector('.conversation-link');
      const statusPill = document.querySelector('.status-pill');
      const startDefaultBtn = document.getElementById('start-default');
      const startClosetBtn = document.getElementById('start-closet');
      const startDefaultCardBtn = document.getElementById('start-default-card');
      const startClosetCardBtn = document.getElementById('start-closet-card');
      const replicaEl = document.getElementById('replica');
      const personaEl = document.getElementById('persona');

      let currentPersonaId = '';
      let currentReplicaId = '';
      let altPersonaId = '';
      let altReplicaId = '';
      let currentObjectivesId = '';
      let currentGuardrailsId = '';
      let altObjectivesId = '';
      let altGuardrailsId = '';
      let defaultObjectivesId = '';
      let defaultGuardrailsId = '';
      let currentStylistLabel = 'Style Concierge';

      const appendLog = (msg) => {
        const stamp = new Date().toLocaleTimeString();
        logEl.textContent = `[${stamp}] ${msg}\n` + logEl.textContent;
      };

      const setStatus = (state) => {
        statusPill.textContent = state || 'No session';
        statusPill.style.background = state === 'active' ? '#e7f9ef' : '#f5f5f5';
        statusPill.style.color = state === 'active' ? '#1c7c3a' : '#4a4a4a';
      };

      const handleResponse = (data) => {
        if (!data) return;
        const { conversation_id, conversation_url, status, conversation_name } = data;
        cidEl.textContent = conversation_id || '—';
        curlEl.textContent = conversation_url ? 'Open conversation' : '—';
        if (conversation_url) {
          curlEl.href = conversation_url;
          curlEl.style.display = 'inline';
        } else {
          curlEl.style.display = 'none';
        }
        setStatus(status);
      };

      const api = async (path, options = {}) => {
        const res = await fetch(path, {
          ...options,
          headers: {
            'content-type': 'application/json',
            ...(options.headers || {}),
          },
        });
        const body = await res.json().catch(() => ({}));
        if (!res.ok) {
          throw new Error(body.error || 'Request failed');
        }
        return body;
      };

      const loadConfig = async () => {
        try {
          const cfg = await api('/api/config');
          console.log('Loaded config:', cfg);
          if (cfg.replica_id) {
            replicaEl.value = cfg.replica_id;
            appendLog(`Loaded replica from server.`);
          }
          if (cfg.persona_id) {
            personaEl.value = cfg.persona_id;
            appendLog(`Loaded persona from server.`);
          }
          if (cfg.alt_persona_id) altPersonaId = cfg.alt_persona_id;
          if (cfg.alt_replica_id) altReplicaId = cfg.alt_replica_id;
          if (cfg.objectives_id) {
            currentObjectivesId = cfg.objectives_id;
            defaultObjectivesId = cfg.objectives_id;
          }
          if (cfg.guardrails_id) {
            currentGuardrailsId = cfg.guardrails_id;
            defaultGuardrailsId = cfg.guardrails_id;
          }
          if (cfg.alt_objectives_id) altObjectivesId = cfg.alt_objectives_id;
          if (cfg.alt_guardrails_id) altGuardrailsId = cfg.alt_guardrails_id;
          console.log('Set variables:', { altPersonaId, altReplicaId, currentPersonaId: personaEl.value, currentReplicaId: replicaEl.value });
          if (cfg.has_objectives || cfg.has_guardrails) {
            appendLog(`Auto-attach: objectives=${cfg.has_objectives}, guardrails=${cfg.has_guardrails}`);
          } else {
            appendLog('No objectives/guardrails set in .env (optional).');
          }
        } catch (err) {
          console.error('Config load error:', err);
          appendLog('Config load failed (using manual inputs).');
        }
      };

      const startConversation = async () => {
        const replica_id = (replicaEl.value || currentReplicaId || '').trim();
        const persona_id = (personaEl.value || currentPersonaId || '').trim();
        const conversation_name = document.getElementById('name').value.trim();
        const callback_url = document.getElementById('callback').value.trim();

        console.log('Starting conversation with:', { replica_id, persona_id, currentPersonaId, currentReplicaId, personaElValue: personaEl.value, replicaElValue: replicaEl.value });

        if (!replica_id || !persona_id) {
          appendLog('Replica ID and Persona ID are required. Ensure defaults are set on the server or choose a stylist.');
          alert('Replica ID and Persona ID are required. Please check server configuration.');
          return;
        }

        appendLog(`Starting ${currentStylistLabel} session…`);
        try {
          const payload = {
            replica_id,
            persona_id,
            conversation_name: conversation_name || `${currentStylistLabel} session`,
            ...(callback_url && { callback_url }),
            ...(currentObjectivesId && { objectives_id: currentObjectivesId }),
            ...(currentGuardrailsId && { guardrails_id: currentGuardrailsId }),
          };
          console.log('Sending payload:', payload);
          const data = await api('/api/conversations', {
            method: 'POST',
            body: JSON.stringify(payload),
          });
          appendLog('Conversation created.');
          handleResponse(data);
        } catch (err) {
          appendLog(err.message);
          alert(`Error: ${err.message}`);
        }
      };

      const applyStylist = (label, personaId, replicaId, objectivesId, guardrailsId) => {
        console.log('Applying stylist:', { label, personaId, replicaId, objectivesId, guardrailsId });
        if (personaId) {
          personaEl.value = personaId;
          currentPersonaId = personaId;
        }
        if (replicaId) {
          replicaEl.value = replicaId;
          currentReplicaId = replicaId;
        }
        if (objectivesId) currentObjectivesId = objectivesId;
        if (guardrailsId) currentGuardrailsId = guardrailsId;
        currentStylistLabel = label;
        console.log('After applying:', { currentPersonaId, currentReplicaId, personaElValue: personaEl.value, replicaElValue: replicaEl.value });
        appendLog(`Stylist set: ${label}`);
      };

      // Event listeners (card buttons only; hero buttons removed)
      if (startDefaultCardBtn) {
        startDefaultCardBtn.addEventListener('click', () => {
          applyStylist('Style Concierge', personaEl.value, replicaEl.value, defaultObjectivesId, defaultGuardrailsId);
          startConversation();
        });
      }

      if (startClosetCardBtn) {
        startClosetCardBtn.addEventListener('click', () => {
          applyStylist('Closet Refresh Curator', altPersonaId, altReplicaId, altObjectivesId, altGuardrailsId);
          startConversation();
        });
      }

      // Initialize
      appendLog('Ready. Loading defaults…');
      loadConfig().then(() => {
        currentPersonaId = personaEl.value || currentPersonaId;
        currentReplicaId = replicaEl.value || currentReplicaId;
        appendLog('Click a stylist to begin.');
      });
    </script>
  </body>
</html>
